<!DOCTYPE HTML>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments :: head">
    <meta charset="UTF-8">
    <title>Medicos</title>
</head>
<body>
<header th:replace="fragments :: header"></header>

<!-- Sección de búsqueda -->
<div class="search-container">
    <form action="/medicos/listaMedicos" method="get" class="search-form">
        <input type="text" name="especialidad" placeholder="Especialidad" class="search-input">
        <input type="text" name="ubicacion" placeholder="Ciudad" class="search-input">
        <button type="submit" class="btn">Buscar</button>
    </form>
</div>

<main class="content-container">
    <p th:if="${#lists.isEmpty(medicos)}" class="no-results">No hay médicos disponibles.</p>

    <!-- Lista de médicos -->
    <div class="Doctors-grid">
        <div th:each="medico : ${medicos}" class="Doctor-card">
            <div class="photo-container">
                <img th:src="@{'/foto/' + ${medico.id}}" class="Doctor-photo" />
            </div>
            <div class="Doctor-info">
                <h3 class="Doctor-name">
                    <span th:text="'Nombre: ' + ${medico.nombre}"></span>
                </h3>
                <h3>
                    <span class="Doctor-cost" th:text="'Costo de consulta: ' + ${medico.costoConsulta}"></span>
                </h3>
                <p class="Doctor-specialty"><strong th:text="'Especialidad: ' + ${medico.especialidad}"></strong></p>
                <p class="Doctor-location" th:text="'Ubicación: ' + ${medico.ubicacion}"></p>

                <!-- Horarios disponibles -->
                <form action="/citas/paginaConfirmarCita" method="post">
                    <div class="schedule-times">
                        <div th:each="horario : ${medico.horarios}" class="day-schedule">
                            <span th:text="${horario.dia}" class="day-name"></span>
                            <div class="time-slots">
                                <!-- Campos ocultos -->
                                <input type="hidden" name="idHorario" th:value="${horario.id}" />
                                <input type="hidden" name="idMedico" th:value="${medico.id}" />

                                <button th:text="${horario.horaInicio}"
                                        th:disabled="${horario.reservado}"
                                        th:class="${horario.reservado ? 'time-btn time-btn-disabled' : 'time-btn'}"
                                        type="submit">
                                </button>
                                <span th:text="${horario.horaInicio}"></span>
                            </div>
                        </div>
                    </div>
                </form>

                <!-- Botón para agendar cita -->
                <form action="/medicos/schedule" method="post" class="schedule-form">
                    <input type="hidden" name="medicoId" th:value="${medico.id}">
                    <input type="hidden" name="page" th:value="1">
                    <button class="btn schedule-btn">Schedule ➜</button>
                </form>
            </div>
        </div>
    </div>
</main>

<footer th:replace="fragments :: footer"></footer>
</body>
</html>